{% extends 'base.html' %}

{% block content %}

<h3 class="mb-4">My Gate Pass Requests</h3>

<div class="card shadow-sm">
    <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">Your Requests</h5>
    </div>

    <div class="card-body">

        {% if passes %}
        <div class="table-responsive">
            <table class="table table-hover">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Reason</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Status</th>
                        <th>Applied At</th>
                    </tr>
                </thead>

                <tbody>
                    {% for p in passes %}
                    <tr>
                        <td>{{ p.id }}</td>
                        <td>{{ p.reason|truncatechars:40 }}</td>
                        <td>{{ p.from_datetime|date:"d-m-Y H:i" }}</td>
                        <td>{{ p.to_datetime|date:"d-m-Y H:i" }}</td>

                        <td>
                            {% if p.status == 'P' %}
                                <span class="badge bg-warning text-dark">Pending</span>
                            {% elif p.status == 'A' %}
                                <span class="badge bg-success">Approved</span>
                            {% else %}
                                <span class="badge bg-danger">Rejected</span>
                            {% endif %}
                        </td>

                        <td>{{ p.applied_at|date:"d-m-Y H:i" }}</td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>

        {% else %}
            <p class="text-muted">You have not applied for any gate passes yet.</p>
        {% endif %}

    </div>
</div>

{% endblock %}
